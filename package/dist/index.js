!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?exports["@tomasc/simple_form_markdown_editor"]=e(require("jquery")):t["@tomasc/simple_form_markdown_editor"]=e(t.jquery)}(window,function(t){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=8)}([function(t,e,i){"use strict";(function(t){e.a=class{static register(){var t,e,i,s;return this,e=(t=null!=(i=this.defaults)?i:{}).name||(t.name=/function ([^(]*)/.exec(this+"")[1]),Array.prototype.slice.call(arguments).slice(1),null!=(s=arguments[0])?s:this.selector,this.init_plugin(this,e)}static init_plugin(e,i){if(void 0===t.fn[i])return t.fn[i]=function(t){var s,n,r;return s=arguments,n=`plugin_${i}`,void 0===t||"object"==typeof t?this.each(function(){var i;if(this.pluginInstances||(this.pluginInstances={}),!this.pluginInstances[n])return i=new e(this,t),this.pluginInstances[n]=i}):"string"==typeof t&&"_"!==t[0]&&"init"!==t?(r=void 0,this.each(function(){var i;if(this.pluginInstances||(this.pluginInstances={}),(i=this.pluginInstances[n])instanceof e&&"function"==typeof i[t]&&(r=i[t].apply(i,Array.prototype.slice.call(s,1))),"destroy"===t)return this.pluginInstances[n]=null}),void 0!==r?r:this):void 0}}constructor(e,i){this.element=e,this.options=t.extend({},this.constructor.defaults,i),this.$element=t(this.element),this.init()}}}).call(this,i(1))},function(e,i){e.exports=t},function(t,e,i){"use strict";(function(t){var s=i(0),n=i(3),r=i(4),o=i(5),_=i(6),a=i(7);e.a=function(){class e extends s.a{init(){return this.Buttons=new n.a(this.get_buttons()[0]),this.Editor=new r.a(this.get_editor()[0]),this.Help=new o.a(this.get_help()[0]),this.Preview=new _.a(this.get_preview()[0]),this.Tabs=new a.a(this.get_tabs()[0]),this.$element.on("show_editor.SimpleFormMarkdownEditor",t=>(t.stopPropagation(),this.$element.addClass(this.options.is_editor_class))),this.$element.on("show_preview.SimpleFormMarkdownEditor",t=>(t.stopPropagation(),this.$element.removeClass(this.options.is_editor_class))),this.$element.on("show_preview.SimpleFormMarkdownEditor",e=>{var i,s;return e.stopPropagation(),i=this.get_options(),s=this.Editor.get_val(),t.ajax({type:"POST",url:this.get_preview_path(),data:{_method:"PUT",text:s,options:i},success:t=>this.get_preview().trigger({type:"show_preview",html:t})})}),this.$element.on("toggle_help.SimpleFormMarkdownEditor",t=>(t.stopPropagation(),this.$element.toggleClass(this.options.is_help_class))),this.$element.on("execute_command.SimpleFormMarkdownEditor",t=>{var e,i;return t.stopPropagation(),e=t.command,i=this.options.definitions[e],this.get_editor().trigger({type:"execute_command_definition",command:e,definition:i})})}destroy(){return this.Buttons&&this.Buttons.destroy(),this.Editor&&this.Editor.destroy(),this.Help&&this.Help.destroy(),this.Preview&&this.Preview.destroy(),this.Tabs&&this.Tabs.destroy(),this.$element.off(".SimpleFormMarkdownEditor")}get_buttons(){return this.$element.find(".simple_form_markdown_editor__buttons")}get_editor(){return this.$element.find(".simple_form_markdown_editor__editor")}get_help(){return this.$element.find(".simple_form_markdown_editor__help")}get_preview(){return this.$element.find(".simple_form_markdown_editor__preview")}get_tabs(){return this.$element.find(".simple_form_markdown_editor__tabs")}get_options(){return this.$element.data("options")}get_preview_path(){return this.$element.data("preview-path")}}return e.defaults={debug:!1,name:"simple_form_markdown_editor",definitions:{strong:"**%{str}**",em:"*%{str}*",code:"`%{str}`",hr:"%{str}***",ul:"* %{str}",ol:"1. %{str}",blockquote:"> %{str}",h1:"# %{str}",h2:"## %{str}",h3:"### %{str}",h4:"#### %{str}",h5:"##### %{str}",h6:"###### %{str}",a:"[%{str}](|)",img:"![%{str}](|)"},is_editor_class:"simple_form_markdown_editor__is_editor",is_help_class:"simple_form_markdown_editor__is_help"},e}()}).call(this,i(1))},function(t,e,i){"use strict";(function(t){var s=i(0);e.a=function(){class e extends s.a{init(){return this.$element.on("click.SimpleFormMarkdownEditor__Buttons",'.simple_form_markdown_editor__button[value="help"]',t=>this.$element.trigger("toggle_help")),this.$element.on("click.SimpleFormMarkdownEditor__Buttons",'.simple_form_markdown_editor__button:not([value="help"])',e=>{var i;return i=t(e.target).attr("value"),this.$element.trigger({type:"execute_command",command:i})})}destroy(){return this.$element.off(".SimpleFormMarkdownEditor__Buttons")}}return e.defaults={debug:!1,name:"simple_form_markdown_editor__buttons"},e}()}).call(this,i(1))},function(t,e,i){"use strict";var s=i(0);e.a=function(){class t extends s.a{init(){return this.$element.on("execute_command_definition.SimpleFormMarkdownEditor__Editor",t=>{var e,i;return t.stopPropagation(),e=t.command,i=t.definition,this.execute_command_definition(e,i)})}destroy(){return this.$element.off(".SimpleFormMarkdownEditor__Editor")}get_textarea(){return this.$element.find("textarea")}get_val(){return this.get_textarea().val()}get_selection(){var t;return{start:(t=this.get_textarea())[0].selectionStart,end:t[0].selectionEnd,length:t[0].selectionEnd-t[0].selectionStart,text:t.val().substring(t[0].selectionStart,t[0].selectionEnd)}}execute_command_definition(t,e){var i,s,n,r,o;return r=this.get_selection(),i=(n=e.replace("%{str}",r.text)).indexOf("|"),o=r.start,s=r.start+n.length,i>-1&&(n=n.replace(/\|/g,""),o=r.start+i,s=r.start+i),this.replace_selection(n),this.set_selection(o,s)}set_selection(t,e){var i;return(i=this.get_textarea()).focus(),i[0].selectionStart=t,i[0].selectionEnd=e}replace_selection(t){var e,i,s,n;return s=(e=this.get_textarea())[0].selectionStart,i=e[0].selectionEnd,n=e.val(),e.val(n.substring(0,s)+t+n.substring(i,n.length))}}return t.defaults={name:"simple_form_markdown_editor__editor",debug:!1},t}()},function(t,e,i){"use strict";(function(t){var s=i(0);e.a=function(){class e extends s.a{init(){var e;return e=this.get_sections().first(),this.set_section(e),this.$element.on("click.SimpleFormMarkdownEditor__Help",".simple_form_markdown_editor__help__section",e=>(e.preventDefault(),this.set_section(t(e.currentTarget)))),this.$element.on("click.SimpleFormMarkdownEditor__Help",".simple_form_markdown_editor__help__sub_section__item",e=>(e.preventDefault(),this.set_sub_section_item(t(e.currentTarget))))}destroy(){return this.$element.off(".SimpleFormMarkdownEditor__Help")}get_help_text(t){return this.get_help_texts().filter(`[data-sub-section='${t}']`)}get_help_texts(){return this.$element.find(".simple_form_markdown_editor__help__text")}get_sections(){return this.$element.find(".simple_form_markdown_editor__help__section")}get_sub_section(t){return this.get_sub_sections().filter(`[data-section='${t}']`)}get_sub_section_items(){return this.$element.find(".simple_form_markdown_editor__help__sub_section__item")}get_sub_sections(){return this.$element.find(".simple_form_markdown_editor__help__sub_section")}set_section(t){var e,i;return t.siblings().removeClass(this.options.section_is_active_class),t.addClass(this.options.section_is_active_class),i=t.data("section"),e=this.get_sub_section(i),this.set_sub_section(e)}set_sub_section(t){var e;return t.siblings().removeClass(this.options.sub_section_is_active_class),t.addClass(this.options.sub_section_is_active_class),e=t.find(".simple_form_markdown_editor__help__sub_section__item").first(),this.set_sub_section_item(e)}set_sub_section_item(t){var e,i;return t.siblings().removeClass(this.options.sub_section_item_is_active_class),t.addClass(this.options.sub_section_item_is_active_class),i=t.data("sub-section"),e=this.get_help_text(i),this.set_help_text(e)}set_help_text(t){return t.siblings().removeClass(this.options.help_text_is_active_class),t.addClass(this.options.help_text_is_active_class)}}return e.defaults={name:"simple_form_markdown_editor__help",debug:!1,section_is_active_class:"simple_form_markdown_editor__help__section__is_active",sub_section_is_active_class:"simple_form_markdown_editor__help__sub_section__is_active",sub_section_item_is_active_class:"simple_form_markdown_editor__help__sub_section__item__is_active",help_text_is_active_class:"simple_form_markdown_editor__help__text__is_active"},e}()}).call(this,i(1))},function(t,e,i){"use strict";var s=i(0);e.a=function(){class t extends s.a{init(){return this.$element.on("show_preview.SimpleFormMarkdownEditor__Preview",t=>{var e;return t.stopPropagation(),e=t.html||"<p>"+this.get_nothing_to_preview_text()+"</p>",this.$element.html(e)})}destroy(){return this.$element.off(".SimpleFormMarkdownEditor__Preview")}get_nothing_to_preview_text(){return this.$element.data("nothing-to-preview-text")||"Nothing to preview."}}return t.defaults={name:"simple_form_markdown_editor__preview",debug:!1},t}()},function(t,e,i){"use strict";(function(t){var s=i(0);e.a=function(){class e extends s.a{init(){return this.set_active_tab(this.get_edit_tab()),this.$element.on("click.SimpleFormMarkdownEditor__Tabs",".simple_form_markdown_editor__tab",e=>this.set_active_tab(t(e.currentTarget))),this.$element.on("click.SimpleFormMarkdownEditor__Tabs",".simple_form_markdown_editor__tab__edit",t=>this.$element.trigger("show_editor")),this.$element.on("click.SimpleFormMarkdownEditor__Tabs",".simple_form_markdown_editor__tab__preview",t=>this.$element.trigger("show_preview"))}destroy(){return this.$element.off(".SimpleFormMarkdownEditor__Tabs")}get_edit_tab(){return this.$element.find(".simple_form_markdown_editor__tab__edit")}get_preview_tab(){return this.$element.find(".simple_form_markdown_editor__tab__preview")}get_tabs(){return this.$element.find(".simple_form_markdown_editor__tab")}set_active_tab(t){return this.get_tabs().removeClass(this.options.is_active_class),t.addClass(this.options.is_active_class)}}return e.defaults={name:"simple_form_markdown_editor__tabs",debug:!1,is_active_class:"simple_form_markdown_editor__tab__is_active"},e}()}).call(this,i(1))},function(t,e,i){"use strict";i.r(e);i(9),i(10),i(11),i(12),i(13),i(14),i(15),i(16),i(17),i(18),i(19),i(20),i(21),i(22),i(23),i(24),i(25),i(26),i(27);var s=i(2);e.default=s.a},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){}])});